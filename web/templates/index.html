<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle AI Visualizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>
    <header>
        <div class="header-content">
            <h1>ðŸŽ® WORDLE AI VISUALIZER</h1>
            <div class="header-buttons">
                <button class="btn" id="themeBtn" title="Toggle Theme">ðŸŽ¨ Theme</button>
                <button class="btn" id="pauseBtn" disabled>Pause</button>
                <button class="btn" id="nextBtn" disabled>Next Step</button>
                <button class="btn" id="restartBtn" disabled>Restart</button>
            </div>
        </div>
    </header>

    <main>
        <!-- LEFT PANEL: Algorithm Info and Suggestions -->
        <div class="left-panel">
            <div class="panel" id="algorithmPanel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2>Algorithm</h2>
                    <div class="mode-toggle" id="modeToggle" style="display: none;">
                        <button class="toggle-btn" id="hintModeBtn" data-mode="hint">ðŸ’¡ Hint</button>
                        <button class="toggle-btn" id="autoModeBtn" data-mode="auto">ðŸ¤– Auto</button>
                    </div>
                </div>
                <div class="algorithm-info" id="algorithmSelector">
                    <div class="algo-display clickable">
                        <div class="algo-icon">ðŸ¤–</div>
                        <div class="algo-details">
                            <div class="algo-name" id="algorithmName">No Algorithm Selected</div>
                            <div class="algo-mode" id="algorithmMode">Click to select algorithm</div>
                        </div>
                        <div class="dropdown-arrow">â–¼</div>
                    </div>
                    <div class="algorithm-dropdown" id="algorithmDropdown" style="display: none;">
                        <div class="dropdown-item" data-solver="dfs">DFS Solver</div>
                        <div class="dropdown-item" data-solver="entropy">Entropy Solver</div>
                        <div class="dropdown-item" data-solver="kbhillclimbing">KB Hill Climbing</div>
                        <div class="dropdown-item" data-solver="progressive">Progressive Entropy</div>
                    </div>
                </div>
            </div>

            <!-- Algorithm Loading Component -->
            <div id="algorithmLoading" class="algorithm-loading-panel" style="display: none;">
                <div class="loading-content">
                    <div class="spinner-container">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                        <div class="loading-info">
                            <h3>AI Thinking...</h3>
                            <div class="loading-message" id="loadingMessage">Analyzing possibilities...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="algorithmResult" class="algorithm-result-panel" style="display: none;">
                <div class="result-content">
                    <div class="result-icon" id="resultIcon">ðŸŽ‰</div>
                    <div class="result-info">
                        <div class="result-message" id="resultMessage">Solved!</div>
                        <div class="result-details" id="resultDetails">Algorithm completed successfully</div>
                    </div>
                </div>
            </div>

            <div class="panel" id="suggestionsPanel">
                <h2>Word Suggestions</h2>
                <p style="text-align: center; color: var(--text-secondary); margin: 1rem 0; font-size: 0.9rem;">
                    Click a word to play it
                </p>
                <div class="suggestions-list" id="suggestionsList">
                    <p style="text-align: center; color: var(--text-secondary);">
                        No suggestions available
                    </p>
                </div>
            </div>
        </div>

        <!-- CENTER PANEL: Game Board and Keyboard -->
        <div class="center-panel">
            <div class="panel">
                <h2>Game Board</h2>
                <div class="game-board" id="gameBoard">
                <!-- 6 rows x 5 tiles -->
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                <div class="row">
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                    <div class="tile"></div>
                </div>
                </div>
            </div>

            <div class="panel">
                <h2>Keyboard</h2>
                <div class="keyboard" id="keyboard">
                    <div class="keyboard-row">
                        <button class="key" data-key="Q">Q</button>
                        <button class="key" data-key="W">W</button>
                        <button class="key" data-key="E">E</button>
                        <button class="key" data-key="R">R</button>
                        <button class="key" data-key="T">T</button>
                        <button class="key" data-key="Y">Y</button>
                        <button class="key" data-key="U">U</button>
                        <button class="key" data-key="I">I</button>
                        <button class="key" data-key="O">O</button>
                        <button class="key" data-key="P">P</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="key" data-key="A">A</button>
                        <button class="key" data-key="S">S</button>
                        <button class="key" data-key="D">D</button>
                        <button class="key" data-key="F">F</button>
                        <button class="key" data-key="G">G</button>
                        <button class="key" data-key="H">H</button>
                        <button class="key" data-key="J">J</button>
                        <button class="key" data-key="K">K</button>
                        <button class="key" data-key="L">L</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="key" data-key="Z">Z</button>
                        <button class="key" data-key="X">X</button>
                        <button class="key" data-key="C">C</button>
                        <button class="key" data-key="V">V</button>
                        <button class="key" data-key="B">B</button>
                        <button class="key" data-key="N">N</button>
                        <button class="key" data-key="M">M</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="key key-wide" data-key="ENTER">ENTER</button>
                        <button class="key key-wide" data-key="BACK">âŒ«</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL: Visualization and Statistics -->
        <div class="right-panel">
            <div class="panel">
                <h2>Statistics</h2>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">Attempts</div>
                        <div class="stat-value" id="attemptsCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Remaining Words</div>
                        <div class="stat-value" id="remainingWords">12953</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Search Depth</div>
                        <div class="stat-value" id="nodesVisited">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Current Solver</div>
                        <div class="stat-value" id="currentSolver" style="font-size: 1rem;">None</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h2>Algorithm Visualization</h2>
                <div class="viz-controls">
                    <button class="viz-tab active" data-tab="tree">Progress Analysis</button>
                    <button class="viz-tab" data-tab="entropy">Word Reduction</button>
                    <button class="viz-tab" data-tab="search">Search Space</button>
                </div>
                <div class="viz-content">
                    <canvas id="vizCanvas" width="600" height="300"></canvas>
                    <canvas id="chartCanvas" width="600" height="300" style="display:none;"></canvas>
                </div>
            </div>
        </div>
    </main>

    <!-- Algorithm Loading Indicator -->
    <div id="algorithmLoading" class="algorithm-loading" style="display: none;">
        <div class="thinking-animation">
            <div class="brain-icon">ðŸ§ </div>
            <div class="dots-container">
                <span class="dot">.</span>
                <span class="dot">.</span>
                <span class="dot">.</span>
            </div>
            <div class="loading-messages">
                <p class="message active">Analyzing possibilities...</p>
                <p class="message">Calculating entropy...</p>
                <p class="message">Searching decision tree...</p>
                <p class="message">Finding optimal move...</p>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <script src="{{ url_for('static', filename='js/app_enhanced.js') }}"></script>
</body>
</html>
